#!/bin/bash
####################################################################################################

# config
source "${ARCHIVE}/.config/config.sh"

####################################################################################################
# daemon
####################################################################################################

# control daemon
source "${PIER}/.daemon.sh"
if check_daemon
then
  # create group
  pueue group add "${pueueUG}"

  # parallel jobs
  pueue parallel --group "${pueueUG}" 3
else
  exit
fi

####################################################################################################
# homebrew
####################################################################################################

# list & upgrade homebrew
pueue add --group "${pueueUG}" -- 'source ~/.archive/ex-situ/pier/.update/brew.sh'

####################################################################################################
# rust
####################################################################################################

# check & upgrade rustc compiler & cargo binaries
pueue add --group "${pueueUG}" -- 'source ~/.archive/ex-situ/pier/.update/rust.sh'

####################################################################################################
# go
####################################################################################################

# upgrade go binaries
pueue add --group "${pueueUG}" -- 'source ~/.archive/ex-situ/pier/.update/go.sh'

####################################################################################################
